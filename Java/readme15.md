# Java 
  
  #### [ 2022-08-21 ]  
  
  ## 목차  
  * #### [[ 쓰레드란? ]](#쓰레드란)    
  * #### [[ 프로세스 ]](#프로세스)  
  * #### [[ 자바에서 쓰레드를 만드는 법 ]](#자바에서-쓰레드를-만드는-법)  
  * #### [[ 람다식(Lambda Expression) ]](#람다식lamda-expression)  
  * #### [[ 함수형 인터페이스(functional interface) ]](#함수형-인터페이스functional-interface)  
    
      
---------------------------------------------------------------------------------------------------------------------------------------------------
  
* ### 쓰레드란?  

  쓰레드(Thread)란 사전적 의미로는 실, 가닥, 맥락, (실 등을) 꿰다. 로 직역할 수 있다.  
  컴퓨터에서 쓰레드란 어떤 프로그램(특히 프로세스) 내에서 실행되는 흐름의 단위를 말한다.     
  일반적으로 한 프로그램은 하나의 쓰레드를 갖고 있지만 프로그램 환경에 따라 둘 이상의 쓰레드를 동시 실행할 수 있다. 이런 실행 방식을 멀티쓰레드라고 한다.  
  
  멀티쓰레딩은 하나의 프로세스 내에서 여러 쓰레드가 동시에 작업을 수행하는 것이 가능하다.   
  실제로는 한 개의 CPU가 한 번에 단 한가지 작업만 수행할 수 있기 때문에 아주 짧은 시간 동안 여러 작업을 번갈아 가며 수행함으로써   
  동시에 여러 작업이 수행되는 것처럼 보이게 하는 것이다.   
    
      ex) 메신저의 경우 채팅하면서 파일을 다운로드 받거나 
      음성대화를 나눌 수 있는 것이 가능한 이유가 바로 멀티쓰레드로 작성되어 있기 때문이다.  
    
  실행 쓰레드는 일반적으로 OS의 일부인 스케줄러에 의해 독립적으로 관리할 수 있는 프로그래밍된 명령의 최소 순서다.   
  쓰레드 및 프로세스의 구현은 OS에 따라 다르지만, 대부분 쓰레드는 프로세스의 구성요소다.   
  한 프로세스 안에 여러 쓰레드가 있어서 동시 실행되고 메모리 같은 리소스를 공유할 수 있지만, 서로 다른 프로세스에선 리소스를 공유하지 않는다.  
    
  나는 쉽게 정리하자면 컴퓨터에서 프로그램의 실행이 이루어지는 흐름의 단위를 쓰레드라고 한다고 이해했다.  
  그렇다면 프로세스는 무엇일까?  

  * ### 프로세스  

        프로세스란 간단히 말해 실행중인 프로그램이다.  
        프로그램을 실행하면 OS로부터 실행에 필요한 메모리를 할당받아 프로세스가 된다.  
        프로세스는 프로그램을 수행하는 데 필요한 데이터와 메모리 등의 자원 그리고 쓰레드로 구성되어 있다.  
        프로세스의 자원을 이용해서 실제로 작업을 수행하는 것이 바로 쓰레드이다.  
    
* ### 자바에서 쓰레드를 만드는 법  

  자바에서 쓰레드를 만드는 방법에는 두가지가 있다고 알려져있다.  
 
  - Thread 클래스 상속

  - Runnable인터페이스를 구현  

  * #### Thread 클래스 상속  
    
  ```java
  public class Thread_class {

    public static void main(String[] args) {

      // 쓰레드 상속받은 클래스 객체화
      ThreadEx1 t1 = new ThreadEx1();
      // 쓰레드 시작
      t1.start();

    }

  }

  class ThreadEx1 extends Thread {
    public void run() {
      for (int i = 0; i < 5; i++) {
        System.out.println(i);
      }
    }
  }
  ```
    
  이 소스코드를 실행하면 자동으로 0부터 4까지 1씩 숫자를 더해가며 출력한다.  
  나는 쉽게 생각해서 프로그램이 진행되는데 있어 중간에 분기점 혹은 텀이 하나   
  생기며 그 사이에서 별도의 코드들을 가진 쓰레드가 실행될 수 있게 만드는 것이라고 이해했다.( 물론 내 이해가 틀렸을 수 있다. )  
      
  만약 별도의 컨트롤이 필요하지 않고 실행이 되게 했을때 쭉 실행돼야 하는 녀석이라면  
  별도의 메소드들을 호출시킬 필요 없이 쓰레드만 호출하게 되면 호출할 쓰레드에 있는 프로그램이 쭉 실행되니 활용하면 보다 코드가   
  간결해지고 가독성이 좋아 질 것 같은 느낌이 들었다.  
    
* #### Runnable인터페이스를 구현  
    
  ```java
  public class Thread_class {

    public static void main(String[] args) {

      Runnable r = new ThreadEx1();
      Thread t1 = new Thread(r);
      t1.start();

    }

  }

  class ThreadEx1 implements Runnable {

    public void run()
    {
      for (int i = 0; i < 5; i++)
      {
        System.out.println(i);
      }
    }

  }
  ```  
  위와 똑같은 결과를 출력하는 소스코드다. 
  차이점이라면 ThreadEx1 뒤에 붙는 키워드가 각각 다른 것,   
  메인 쓰레드에서 Runnable 인터페이스를 구현한 클래스의 객체를 ThreadEx1과 매핑해서 객체화한 다음,   
  Thread 클래스의 생성자에 인자로 넣어서 실행하는 것이다.  
  
  공통점은 Thread를 상속받아서 쓰레드를 만들건,   
  Runnable 인터페이스를 구현해서 쓰레드를 만들건 start()를 통해서 쓰레드를 시작한다는 것이다.  
  
  즉, start()를 호출해야만 쓰레드가 실행된다는 것이다.  
  이 말은 start() 전엔 쓰레드는 실행대기 상태에 있다가 자기 차례가 오면(start() 호출) 자신의 차례가 되야 실행된다는 것이다.  
    
* ### 람다식(Lambda Expression)  

  람다 표현식(lambda expression)이란 간단히 말해 메소드를 하나의 식으로 표현한 것이다.  
  그전에 내가 JS에서 살펴본 화살표 함수와 비슷하다 할 수 있다.  
    
    * ##### js 화살표 함수  
      
        ```js
        () => {};  
        ```  
          
    * ##### 람다 표현식  

       * ##### 메소드
        ```java
        int min(int x, int y) {
            return x < y ? x : y;
        }
        ```
          
       * ##### 람다 표현식
        ```java
        (x, y) -> x < y ? x : y;
        ```  
    
  위처럼 메소드를 람다 표현식으로 표현하면, 클래스를 작성하고 객체를 생성하지 않아도 메소드를 사용할 수 있다.  
    
  그런데 자바에서는 클래스의 선언과 동시에 객체를 생성하므로, 단 하나의 객체만을 생성할 수 있는 클래스를 익명 클래스라고 한다.  
  따라서 자바에서 람다 표현식은 익명 클래스와 같다고 할 수 있다.  
    
  이러한 람다 표현식은 메소드의 매개변수로 전달될 수도 있으며, 메소드의 결괏값으로 반환될 수도 있다.  
  그러니 람다 표현식을 사용하면, 기존의 불필요한 코드를 줄여주고, 작성된 코드의 가독성을 높여준다.  
    
  Java SE 8부터 람다 표현식을 사용하여 자바에서도 함수형 프로그래밍을 할 수 있게 되었다고 한다.  
    
  * #### 람다 표현식 작성법
    
    자바에서도 JS와 같이 화살표(->) 기호를 사용하여 람다 표현식을 작성할 수 있다.  
    ```java
    (매개변수목록) -> { 함수몸체 }
    ```  
      
    자바에서 람다 표현식을 작성할 때 유의해야 할 사항은 다음과 같다.  
      
    - 매개변수의 타입을 추론할 수 있는 경우에는 타입을 생략할 수 있다.

    - 매개변수가 하나인 경우에는 괄호(())를 생략할 수 있다.

    - 함수의 몸체가 하나의 명령문만으로 이루어진 경우에는 중괄호({})를 생략할 수 있다. (이때 세미콜론(;)은 붙이지 않음)

    - 함수의 몸체가 하나의 return 문으로만 이루어진 경우에는 중괄호({})를 생략할 수 없다.  

    - return 문 대신 표현식을 사용할 수 있으며, 이때 반환값은 표현식의 결괏값이 됩니다. (이때 세미콜론(;)은 붙이지 않음)  
      
  * #### 전통적인 방식의 스레드 생성과 람다 표현식을 사용한 스레드 생성을 비교하는 예제  

    ```java
    new Thread(new Runnable() {
        public void run() {
            System.out.println("전통적인 방식의 일회용 스레드 생성");
        }
    }).start();


    new Thread(()->{
        System.out.println("람다 표현식을 사용한 일회용 스레드 생성");
    }).start();
    ```  
      
    위의 예제에서 볼 수 있듯이 람다 표현식을 사용하면 불필요한 코드를 줄일 수 있으며, 코드의 가독성이 훨씬 좋아진다.  
      
  * #### 함수형 인터페이스(functional interface)  

    람다 표현식을 사용할 때는 람다 표현식을 저장하기 위한 참조 변수의 타입을 결정해야만 한다.  
    문법은 다음과 같다. ```참조변수의타입 참조변수의이름 = 람다 표현식```  
    람다 표현식을 하나의 변수에 대입할 때 사용하는 참조 변수의 타입을 함수형 인터페이스라고 부른다.  
    함수형 인터페이스는 추상 클래스와는 달리 단 하나의 추상 메소드만을 가져야 한다.  
    ```java
    @FunctionalInterface
    ```
    또한, 어노테이션(annotation)을 사용하여 함수형 인터페이스임을 명시할 수 있다.  
    위와 같은 어노테이션을 인터페이스의 선언 앞에 붙이면, 컴파일러는 해당 인터페이스를 함수형 인터페이스로 인식한다.  
    자바 컴파일러는 이렇게 명시된 함수형 인터페이스에 두 개 이상의 메소드가 선언되면 오류를 발생시킨다.  
      
    다음 예제는 함수형 인터페이스를 선언하고 사용하는 예제이다.  
    ```java
    @FunctionalInterface
    interface Calc { // 함수형 인터페이스의 선언
        public int min(int x, int y);
    }

    public class Lambda02 {
    public static void main(String[] args){
            Calc minNum = (x, y) -> x < y ? x : y; // 추상 메소드의 구현
            System.out.println(minNum.min(3, 4));  // 함수형 인터페이스의 사용
        }
    }
    ```
      
    예제로 보니 이해가 되는 것 같다.  
    쓰레드도, 람다 표현식도 정확하게 이해하고 활용할 수 있을 때 까지 연습하고자 한다.  

# SQL  
  
  #### [ 2022-08-12 ]  
    
  ## 목차  
  * #### [[ 서브쿼리(Subquery) ]](#서브쿼리subquery)  
  * #### [[ 서브쿼리의 장점 ]](#서브쿼리의-장점)  
  * #### [[ 상관쿼리와 비상관 쿼리 ]](#상관쿼리와-비상관-쿼리)  
  * #### [[ CHAR와 VARCHAR 비교 ]](#char와-varchar-비교)  
      
-----------------------------------------------------------------------------------------------------------------------------------------------------  
  
* ### 서브쿼리(Subquery)  
  
  서브쿼리(subquery)란 다른 쿼리 내부에 포함되어 있는 SELETE 문을 의미한다.  
  서브쿼리를 포함하고 있는 쿼리를 외부쿼리(outer query)라고 부르며, 서브쿼리는 내부쿼리(inner query)라고도 부른다.  
  서브쿼리는 다음과 같이 괄호() 로 감싸져서 표현 된다.  
  
  ```sql
  SELECT * FROM city
  WHERE country_id = (SELECT country_id FROM country WHERE country = 'South Korea');
  ```
  
  순서를 위 예제로 보면 ```()```안에 있는 서브쿼리 ```(SELECT country_id FROM country WHERE country = 'South Korea');```가   
  먼저 실행되고 → 메인(부모) 쿼리 실행가 실행 된다.  
    
* ### 서브쿼리의 장점  
  
  * 서브쿼리는 쿼리를 구조화시키므로, 쿼리의 각 부분을 명확히 구분할 수 있게 해준다.  
   
  * 서브쿼리는 복잡한 JOIN이나 UNION과 같은 동작을 수행할 수 있는 또 다른 방법을 제공한다.  
  
  * 서브쿼리는 복잡한 JOIN이나 UNION 보다 좀 더 읽기 편하다.  

* ### 상관쿼리와 비상관 쿼리

  * 상관 쿼리  
    
        상관 쿼리는  Main query의 열을 참조하는 쿼리를 말한다. 내부 쿼리의 값이 결정되는데 외부 쿼리에 의존한다.  
        상관 쿼리를 사용하는 일반적인 예는 외부 쿼리에 있는 행들에서 관련 테이블에 없는 모든 행을 찾는 것이다.  
            
  * 비상관 쿼리  

        비상관 쿼리는 Main query의 참조 없이 독립적으로 실행이 가능한 쿼리를 말한다.  
        만약 서브 쿼리가 외부 쿼리의 어떤 것도 참조하지 않고 단독적으로 사용되면 그것을 비상관 쿼리라고한다.  
        주로 비상관 쿼리를 사용한다.  
  
* ### CHAR와 VARCHAR 비교  

  * CHAR  

    * CHAR는 고정 사이즈이다. ( 고정형 문자열 )
      
    * 남는 공간은 공백으로 채우게 된다.  

    * 공백 채움 비교(blank-padded comparison semantics)를 사용한다. 
      예를 들어 CHAR(8) 인데 ‘person’라는 6자짜리 문자열을 insert하게 되면 남는 공간은 2개의 공백으로 채우게 된다.
      
    * 값을 받아 올 때는 공백이 자동으로 제거된다.  

  * VARCHAR  

    * VARCHAR는 이름이 의미하듯 가변 길이이다.  

    * 데이터를 삽입 시 데이터값외에 삽입된 문자열의 길이를 저장하는데 255글자 이하에는 1바이트
      그 이상은 2바이트의 추가 공간을 필요로 한다. 즉 실질적인 데이터와 길이 정보도 같이 저장된다.
      
